# ─── Saubh.Tech Platform — Local Dev Caddyfile ──────────────────────────────
# Usage: caddy run --config infra/caddy/Caddyfile.dev
# No TLS — plain HTTP for local development only.
# ─────────────────────────────────────────────────────────────────────────────

{
	auto_https off
}

# ─── Web (localhost:3000) ────────────────────────────────────────────────────
:3080 {
	reverse_proxy localhost:3000
}

# ─── API (localhost:3001) ────────────────────────────────────────────────────
:3081 {
	reverse_proxy localhost:3001
}

# ─── Realtime (localhost:3002) ───────────────────────────────────────────────
:3082 {
	reverse_proxy localhost:3002 {
		transport http {
			versions h2c 1.1
		}
		header_up Connection {>Connection}
		header_up Upgrade {>Upgrade}
	}
}

# ─── Admin (localhost:3003) ──────────────────────────────────────────────────
:3083 {
	reverse_proxy localhost:3003
}
